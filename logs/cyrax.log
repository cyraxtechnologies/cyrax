{"asctime": "2025-10-29 00:33:29,980", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-29 00:33:29,980", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-29 00:33:30,015", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-29 00:33:30,015", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 00:33:30,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-29 00:33:30,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 00:33:30,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-29 00:33:30,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 00:33:30,017", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 00:33:30,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 00:33:30,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00014s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 00:33:30,022", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 00:33:30,022", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.00416s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 00:33:30,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 00:33:30,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.004706s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 00:33:30,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 00:33:30,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00011s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 00:33:30,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE TYPE userstatus AS ENUM ('PENDING_VERIFICATION', 'ACTIVE', 'SUSPENDED', 'BLOCKED')"}
{"asctime": "2025-10-29 00:33:30,026", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00007s] {}"}
{"asctime": "2025-10-29 00:33:30,031", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 00:33:30,031", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.006278s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 00:33:30,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE TYPE transactiontype AS ENUM ('SEND_MONEY', 'RECEIVE_MONEY', 'BILL_PAYMENT', 'AIRTIME_PURCHASE', 'DATA_PURCHASE', 'ELECTRICITY_PURCHASE', 'WITHDRAWAL', 'DEPOSIT', 'REFUND')"}
{"asctime": "2025-10-29 00:33:30,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00008s] {}"}
{"asctime": "2025-10-29 00:33:30,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 00:33:30,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.007525s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 00:33:30,033", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE TYPE transactionstatus AS ENUM ('PENDING', 'PROCESSING', 'COMPLETED', 'FAILED', 'REVERSED')"}
{"asctime": "2025-10-29 00:33:30,033", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00006s] {}"}
{"asctime": "2025-10-29 00:33:30,034", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "\nCREATE TABLE users (\n\tid UUID NOT NULL, \n\tphone_number VARCHAR(20) NOT NULL, \n\temail VARCHAR(255), \n\twhatsapp_name VARCHAR(255), \n\tfirst_name VARCHAR(100), \n\tlast_name VARCHAR(100), \n\tid_number VARCHAR(20), \n\tdate_of_birth TIMESTAMP WITHOUT TIME ZONE, \n\tnationality VARCHAR(50), \n\taddress_line1 VARCHAR(255), \n\taddress_line2 VARCHAR(255), \n\tcity VARCHAR(100), \n\tprovince VARCHAR(100), \n\tpostal_code VARCHAR(10), \n\tcountry VARCHAR(50), \n\taccount_number VARCHAR(50), \n\tbalance FLOAT NOT NULL, \n\tstatus userstatus, \n\tpin_hash VARCHAR(255), \n\tpin_attempts INTEGER, \n\tpin_locked_until TIMESTAMP WITHOUT TIME ZONE, \n\tis_phone_verified BOOLEAN, \n\tis_email_verified BOOLEAN, \n\tis_id_verified BOOLEAN, \n\tis_address_verified BOOLEAN, \n\tis_fica_compliant BOOLEAN, \n\tid_document_url VARCHAR(500), \n\tproof_of_residence_url VARCHAR(500), \n\tselfie_url VARCHAR(500), \n\tdaily_limit FLOAT, \n\tmonthly_limit FLOAT, \n\tdaily_spent FLOAT, \n\tmonthly_spent FLOAT, \n\tlast_daily_reset TIMESTAMP WITHOUT TIME ZONE, \n\tlast_monthly_reset TIMESTAMP WITHOUT TIME ZONE, \n\tpreferred_language VARCHAR(10), \n\tnotification_enabled BOOLEAN, \n\tmarketing_consent BOOLEAN, \n\tuser_metadata JSONB, \n\treferral_code VARCHAR(20), \n\treferred_by UUID, \n\tcreated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, \n\tupdated_at TIMESTAMP WITHOUT TIME ZONE, \n\tlast_active_at TIMESTAMP WITHOUT TIME ZONE, \n\tverified_at TIMESTAMP WITHOUT TIME ZONE, \n\tPRIMARY KEY (id), \n\tUNIQUE (email), \n\tUNIQUE (id_number), \n\tUNIQUE (account_number), \n\tUNIQUE (referral_code)\n)\n\n"}
{"asctime": "2025-10-29 00:33:30,034", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00011s] {}"}
{"asctime": "2025-10-29 00:33:30,061", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE UNIQUE INDEX ix_users_phone_number ON users (phone_number)"}
{"asctime": "2025-10-29 00:33:30,061", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00027s] {}"}
{"asctime": "2025-10-29 00:33:30,064", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "\nCREATE TABLE conversations (\n\tid UUID NOT NULL, \n\tuser_id UUID, \n\tphone_number VARCHAR(20) NOT NULL, \n\tmessage_id VARCHAR(100), \n\tmessage_type VARCHAR(20) NOT NULL, \n\tdirection VARCHAR(10) NOT NULL, \n\tmessage_text TEXT, \n\tmedia_url VARCHAR(500), \n\tmedia_mime_type VARCHAR(50), \n\tai_response TEXT, \n\tintent_detected VARCHAR(50), \n\tentities_extracted JSONB, \n\tconfidence_score FLOAT, \n\tprocessing_time_ms INTEGER, \n\tconversation_context JSONB, \n\tsession_id VARCHAR(100), \n\tis_processed BOOLEAN, \n\tis_error BOOLEAN, \n\terror_message TEXT, \n\tconversation_metadata JSONB, \n\tcreated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, \n\tprocessed_at TIMESTAMP WITHOUT TIME ZONE, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id), \n\tUNIQUE (message_id)\n)\n\n"}
{"asctime": "2025-10-29 00:33:30,064", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00021s] {}"}
{"asctime": "2025-10-29 00:33:30,068", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_conversations_user_id ON conversations (user_id)"}
{"asctime": "2025-10-29 00:33:30,068", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00008s] {}"}
{"asctime": "2025-10-29 00:33:30,069", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_conversations_session_id ON conversations (session_id)"}
{"asctime": "2025-10-29 00:33:30,069", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00005s] {}"}
{"asctime": "2025-10-29 00:33:30,070", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_conversations_phone_number ON conversations (phone_number)"}
{"asctime": "2025-10-29 00:33:30,070", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00006s] {}"}
{"asctime": "2025-10-29 00:33:30,071", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_conversations_created_at ON conversations (created_at)"}
{"asctime": "2025-10-29 00:33:30,071", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00005s] {}"}
{"asctime": "2025-10-29 00:33:30,073", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "\nCREATE TABLE transactions (\n\tid UUID NOT NULL, \n\tuser_id UUID NOT NULL, \n\ttype transactiontype NOT NULL, \n\tstatus transactionstatus, \n\tamount FLOAT NOT NULL, \n\tcurrency VARCHAR(3), \n\tsender_phone VARCHAR(20), \n\trecipient_phone VARCHAR(20), \n\trecipient_name VARCHAR(255), \n\trecipient_bank VARCHAR(100), \n\trecipient_account VARCHAR(50), \n\tbill_provider VARCHAR(100), \n\tbill_account_number VARCHAR(100), \n\tbill_reference VARCHAR(100), \n\tpayment_reference VARCHAR(100), \n\tgateway_reference VARCHAR(100), \n\tgateway_response JSONB, \n\ttransaction_fee FLOAT, \n\tgateway_fee FLOAT, \n\ttotal_amount FLOAT NOT NULL, \n\tbalance_before FLOAT, \n\tbalance_after FLOAT, \n\tdescription TEXT, \n\tuser_note TEXT, \n\tadmin_note TEXT, \n\toriginal_message TEXT, \n\tintent_detected VARCHAR(50), \n\tfailure_reason TEXT, \n\tretry_count INTEGER, \n\ttransaction_metadata JSONB, \n\tip_address VARCHAR(50), \n\tdevice_info VARCHAR(255), \n\tcreated_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, \n\tupdated_at TIMESTAMP WITHOUT TIME ZONE, \n\tcompleted_at TIMESTAMP WITHOUT TIME ZONE, \n\tfailed_at TIMESTAMP WITHOUT TIME ZONE, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id)\n)\n\n"}
{"asctime": "2025-10-29 00:33:30,073", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00010s] {}"}
{"asctime": "2025-10-29 00:33:30,075", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_transactions_status ON transactions (status)"}
{"asctime": "2025-10-29 00:33:30,076", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00006s] {}"}
{"asctime": "2025-10-29 00:33:30,077", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_transactions_user_id ON transactions (user_id)"}
{"asctime": "2025-10-29 00:33:30,077", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00005s] {}"}
{"asctime": "2025-10-29 00:33:30,078", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE UNIQUE INDEX ix_transactions_payment_reference ON transactions (payment_reference)"}
{"asctime": "2025-10-29 00:33:30,078", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00006s] {}"}
{"asctime": "2025-10-29 00:33:30,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_transactions_created_at ON transactions (created_at)"}
{"asctime": "2025-10-29 00:33:30,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00005s] {}"}
{"asctime": "2025-10-29 00:33:30,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "CREATE INDEX ix_transactions_type ON transactions (type)"}
{"asctime": "2025-10-29 00:33:30,080", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[no key 0.00007s] {}"}
{"asctime": "2025-10-29 00:33:30,080", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-29 00:33:30,081", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-29 00:33:30,081", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-29 00:33:30,081", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-29 00:36:42,035", "name": "app.main", "levelname": "ERROR", "message": "Health check failed: Textual SQL expression 'SELECT 1' should be explicitly declared as text('SELECT 1')"}
{"asctime": "2025-10-29 17:20:55,347", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-29 17:20:55,994", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-29 17:20:55,994", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-29 17:20:56,021", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-29 17:20:56,021", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 17:20:56,022", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-29 17:20:56,022", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 17:20:56,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-29 17:20:56,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 17:20:56,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 17:20:56,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 17:20:56,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00012s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 17:20:56,029", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 17:20:56,029", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.004356s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 17:20:56,029", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 17:20:56,029", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.004996s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 17:20:56,031", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 17:20:56,031", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00011s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 17:20:56,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 17:20:56,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001157s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 17:20:56,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 17:20:56,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001642s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 17:20:56,033", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-29 17:20:56,033", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-29 17:20:56,033", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-29 17:20:56,033", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-29 17:21:14,860", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 17:21:14,861", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT 1"}
{"asctime": "2025-10-29 17:21:14,861", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {}"}
{"asctime": "2025-10-29 17:21:14,861", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-29 22:44:24,178", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 22:44:24,192", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(users.id) AS count_1 \nFROM users"}
{"asctime": "2025-10-29 22:44:24,192", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00052s] {}"}
{"asctime": "2025-10-29 22:44:24,199", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(users.id) AS count_1 \nFROM users \nWHERE users.status = %(status_1)s"}
{"asctime": "2025-10-29 22:44:24,200", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00022s] {'status_1': 'ACTIVE'}"}
{"asctime": "2025-10-29 22:44:24,203", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(users.id) AS count_1 \nFROM users \nWHERE users.is_fica_compliant = true"}
{"asctime": "2025-10-29 22:44:24,203", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00014s] {}"}
{"asctime": "2025-10-29 22:44:24,204", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(transactions.id) AS count_1 \nFROM transactions"}
{"asctime": "2025-10-29 22:44:24,204", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00013s] {}"}
{"asctime": "2025-10-29 22:44:24,208", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(transactions.id) AS count_1 \nFROM transactions \nWHERE transactions.status = %(status_1)s"}
{"asctime": "2025-10-29 22:44:24,208", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00014s] {'status_1': 'COMPLETED'}"}
{"asctime": "2025-10-29 22:44:24,209", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(transactions.id) AS count_1 \nFROM transactions \nWHERE transactions.status = %(status_1)s"}
{"asctime": "2025-10-29 22:44:24,209", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001184s ago] {'status_1': 'FAILED'}"}
{"asctime": "2025-10-29 22:44:24,210", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT sum(transactions.amount) AS sum_1 \nFROM transactions \nWHERE transactions.status = %(status_1)s"}
{"asctime": "2025-10-29 22:44:24,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00012s] {'status_1': 'COMPLETED'}"}
{"asctime": "2025-10-29 22:44:24,213", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(conversations.id) AS count_1 \nFROM conversations"}
{"asctime": "2025-10-29 22:44:24,213", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00012s] {}"}
{"asctime": "2025-10-29 22:44:24,217", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-29 22:52:07,031", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 22:52:07,046", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT transactions.id AS transactions_id, transactions.user_id AS transactions_user_id, transactions.type AS transactions_type, transactions.status AS transactions_status, transactions.amount AS transactions_amount, transactions.currency AS transactions_currency, transactions.sender_phone AS transactions_sender_phone, transactions.recipient_phone AS transactions_recipient_phone, transactions.recipient_name AS transactions_recipient_name, transactions.recipient_bank AS transactions_recipient_bank, transactions.recipient_account AS transactions_recipient_account, transactions.bill_provider AS transactions_bill_provider, transactions.bill_account_number AS transactions_bill_account_number, transactions.bill_reference AS transactions_bill_reference, transactions.payment_reference AS transactions_payment_reference, transactions.gateway_reference AS transactions_gateway_reference, transactions.gateway_response AS transactions_gateway_response, transactions.transaction_fee AS transactions_transaction_fee, transactions.gateway_fee AS transactions_gateway_fee, transactions.total_amount AS transactions_total_amount, transactions.balance_before AS transactions_balance_before, transactions.balance_after AS transactions_balance_after, transactions.description AS transactions_description, transactions.user_note AS transactions_user_note, transactions.admin_note AS transactions_admin_note, transactions.original_message AS transactions_original_message, transactions.intent_detected AS transactions_intent_detected, transactions.failure_reason AS transactions_failure_reason, transactions.retry_count AS transactions_retry_count, transactions.transaction_metadata AS transactions_transaction_metadata, transactions.ip_address AS transactions_ip_address, transactions.device_info AS transactions_device_info, transactions.created_at AS transactions_created_at, transactions.updated_at AS transactions_updated_at, transactions.completed_at AS transactions_completed_at, transactions.failed_at AS transactions_failed_at \nFROM transactions ORDER BY transactions.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-29 22:52:07,046", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00041s] {'param_1': 20}"}
{"asctime": "2025-10-29 22:52:07,059", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-29 23:11:09,781", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-29 23:12:10,685", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-29 23:12:10,685", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-29 23:12:10,783", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-29 23:12:10,783", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:12:10,785", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-29 23:12:10,785", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:12:10,786", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-29 23:12:10,786", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:12:10,787", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 23:12:10,788", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:12:10,789", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00014s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:12:10,790", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:12:10,790", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001623s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:12:10,791", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:12:10,791", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002221s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:12:10,793", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:12:10,793", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00016s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:12:10,794", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:12:10,794", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0009575s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:12:10,794", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:12:10,794", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001469s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:12:10,795", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-29 23:12:10,795", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-29 23:12:10,795", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-29 23:12:10,795", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-29 23:16:26,288", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 23:16:26,294", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(users.id) AS count_1 \nFROM users"}
{"asctime": "2025-10-29 23:16:26,294", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00021s] {}"}
{"asctime": "2025-10-29 23:16:26,300", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(users.id) AS count_1 \nFROM users \nWHERE users.status = %(status_1)s"}
{"asctime": "2025-10-29 23:16:26,300", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00014s] {'status_1': 'ACTIVE'}"}
{"asctime": "2025-10-29 23:16:26,301", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(users.id) AS count_1 \nFROM users \nWHERE users.is_fica_compliant = true"}
{"asctime": "2025-10-29 23:16:26,301", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00013s] {}"}
{"asctime": "2025-10-29 23:16:26,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(transactions.id) AS count_1 \nFROM transactions"}
{"asctime": "2025-10-29 23:16:26,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {}"}
{"asctime": "2025-10-29 23:16:26,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(transactions.id) AS count_1 \nFROM transactions \nWHERE transactions.status = %(status_1)s"}
{"asctime": "2025-10-29 23:16:26,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00012s] {'status_1': 'COMPLETED'}"}
{"asctime": "2025-10-29 23:16:26,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(transactions.id) AS count_1 \nFROM transactions \nWHERE transactions.status = %(status_1)s"}
{"asctime": "2025-10-29 23:16:26,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0007139s ago] {'status_1': 'FAILED'}"}
{"asctime": "2025-10-29 23:16:26,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT sum(transactions.amount) AS sum_1 \nFROM transactions \nWHERE transactions.status = %(status_1)s"}
{"asctime": "2025-10-29 23:16:26,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'status_1': 'COMPLETED'}"}
{"asctime": "2025-10-29 23:16:26,306", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT count(conversations.id) AS count_1 \nFROM conversations"}
{"asctime": "2025-10-29 23:16:26,306", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00017s] {}"}
{"asctime": "2025-10-29 23:16:26,308", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-29 23:18:54,904", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-29 23:18:55,522", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-29 23:18:55,522", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-29 23:18:55,536", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-29 23:18:55,536", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:18:55,537", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-29 23:18:55,537", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:18:55,537", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-29 23:18:55,538", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:18:55,538", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 23:18:55,539", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:18:55,539", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:18:55,541", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:18:55,542", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002606s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:18:55,542", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:18:55,542", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.003023s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:18:55,543", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:18:55,543", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00011s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:18:55,544", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:18:55,544", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001115s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:18:55,545", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:18:55,545", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.00171s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:18:55,545", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-29 23:18:55,545", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-29 23:18:55,545", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-29 23:18:55,545", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-29 23:29:59,650", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-29 23:30:00,277", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-29 23:30:00,277", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-29 23:30:00,296", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-29 23:30:00,297", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:30:00,297", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-29 23:30:00,297", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:30:00,298", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-29 23:30:00,298", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:30:00,298", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 23:30:00,299", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:30:00,299", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00011s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:30:00,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:30:00,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002616s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:30:00,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:30:00,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.003112s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:30:00,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:30:00,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00008s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:30:00,304", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:30:00,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0009262s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:30:00,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:30:00,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001592s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:30:00,306", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-29 23:30:00,306", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-29 23:30:00,306", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-29 23:30:00,306", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-29 23:30:10,443", "name": "app.services.ai_service", "levelname": "ERROR", "message": "AI processing error: \n\nYou tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.\n\nYou can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. \n\nAlternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`\n\nA detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742\n"}
{"asctime": "2025-10-29 23:32:59,926", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-29 23:33:00,544", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-29 23:33:00,544", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-29 23:33:00,626", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-29 23:33:00,626", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:33:00,627", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-29 23:33:00,627", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:33:00,627", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-29 23:33:00,627", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-29 23:33:00,627", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-29 23:33:00,629", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:33:00,629", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00012s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:33:00,631", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:33:00,631", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002069s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:33:00,631", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:33:00,631", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002493s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:33:00,633", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:33:00,633", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00013s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:33:00,634", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:33:00,634", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0009743s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:33:00,635", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-29 23:33:00,635", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001454s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-29 23:33:00,635", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-29 23:33:00,635", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-29 23:33:00,635", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-29 23:33:00,635", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-29 23:33:06,378", "name": "app.services.ai_service", "levelname": "ERROR", "message": "AI processing error: \n\nYou tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.\n\nYou can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. \n\nAlternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`\n\nA detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742\n"}
{"asctime": "2025-10-29 23:33:24,777", "name": "app.services.ai_service", "levelname": "ERROR", "message": "AI processing error: \n\nYou tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.\n\nYou can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. \n\nAlternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`\n\nA detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742\n"}
{"asctime": "2025-10-30 19:16:04,476", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 19:16:04,476", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 19:16:04,572", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 19:16:04,572", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:16:04,575", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 19:16:04,575", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:16:04,576", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 19:16:04,576", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:16:04,576", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 19:16:04,578", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:04,578", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00018s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:04,582", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:04,582", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.003617s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:04,582", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:04,582", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.004025s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:04,583", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:04,583", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:04,584", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:04,584", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.00128s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:04,585", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:04,585", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002302s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:04,586", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 19:16:04,586", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 19:16:04,586", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 19:16:04,586", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 19:16:20,682", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 404 Not Found\""}
{"asctime": "2025-10-30 19:16:20,684", "name": "app.services.ai_service", "levelname": "ERROR", "message": "AI processing error: Error code: 404 - {'error': {'message': 'The model `gpt-4-turbo-preview` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}"}
{"asctime": "2025-10-30 19:16:36,332", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 19:16:37,115", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 19:16:37,115", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 19:16:37,134", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 19:16:37,134", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:16:37,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 19:16:37,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:16:37,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 19:16:37,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:16:37,136", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 19:16:37,137", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:37,137", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00009s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:37,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:37,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.00221s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:37,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:37,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002772s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:37,140", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:37,140", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00008s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:37,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:37,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0006498s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:37,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:16:37,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001183s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:16:37,142", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 19:16:37,142", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 19:16:37,142", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 19:16:37,142", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 19:17:07,440", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 404 Not Found\""}
{"asctime": "2025-10-30 19:17:07,443", "name": "app.services.ai_service", "levelname": "ERROR", "message": "AI processing error: Error code: 404 - {'error': {'message': 'The model `gpt-4-turbo-preview` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}"}
{"asctime": "2025-10-30 19:22:44,736", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 19:22:53,646", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 19:22:53,647", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 19:22:53,665", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 19:22:53,665", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:22:53,666", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 19:22:53,666", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:22:53,666", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 19:22:53,666", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:22:53,666", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 19:22:53,668", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:22:53,668", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00009s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:22:53,670", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:22:53,670", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002115s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:22:53,670", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:22:53,670", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002439s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:22:53,671", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:22:53,671", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00006s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:22:53,671", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:22:53,671", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.00058s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:22:53,671", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:22:53,671", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0009478s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:22:53,672", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 19:22:53,672", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 19:22:53,672", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 19:22:53,672", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 19:23:15,267", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 19:43:02,412", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 19:43:02,996", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 19:43:02,996", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 19:43:03,017", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 19:43:03,017", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:43:03,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 19:43:03,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:43:03,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 19:43:03,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:43:03,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 19:43:03,020", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:03,020", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:03,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:03,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.003965s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:03,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:03,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.004682s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:03,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:03,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00008s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:03,026", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:03,026", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.000573s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:03,026", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:03,026", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001032s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:03,026", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 19:43:03,027", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 19:43:03,027", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 19:43:03,027", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 19:43:11,618", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 19:43:12,116", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 19:43:12,117", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 19:43:12,133", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 19:43:12,133", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:43:12,134", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 19:43:12,134", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:43:12,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 19:43:12,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 19:43:12,135", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 19:43:12,136", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:12,136", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00009s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:12,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:12,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002523s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:12,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:12,139", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.003021s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:12,140", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:12,140", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00008s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:12,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:12,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0006171s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:12,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 19:43:12,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001035s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 19:43:12,141", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 19:43:12,142", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 19:43:12,142", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 19:43:12,142", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 19:44:04,924", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 21:00:56,656", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 21:00:56,656", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 21:00:56,677", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 21:00:56,677", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:00:56,678", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 21:00:56,678", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:00:56,678", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 21:00:56,679", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:00:56,679", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:00:56,680", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:00:56,680", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:00:56,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:00:56,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001653s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:00:56,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:00:56,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001968s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:00:56,683", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:00:56,683", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00007s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:00:56,683", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:00:56,683", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0006776s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:00:56,684", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:00:56,684", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001199s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:00:56,684", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:00:56,684", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 21:00:56,684", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 21:00:56,684", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 21:06:02,888", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 21:06:05,058", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 21:06:05,058", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 21:06:05,075", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 21:06:05,075", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:06:05,075", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 21:06:05,075", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:06:05,076", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 21:06:05,076", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:06:05,076", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:06:05,077", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:06:05,077", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:06:05,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:06:05,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.00184s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:06:05,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:06:05,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002164s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:06:05,080", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:06:05,080", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00006s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:06:05,081", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:06:05,081", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0008913s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:06:05,082", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:06:05,082", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001627s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:06:05,082", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:06:05,083", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 21:06:05,083", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 21:06:05,083", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 21:15:23,203", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM29a54314fd0f40414375228c13acf210', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM29a54314fd0f40414375228c13acf210', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Hi', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM29a54314fd0f40414375228c13acf210', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:15:23,213", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:15:23,217", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:15:23,217", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00025s] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:15:23,228", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO users (id, phone_number, email, whatsapp_name, first_name, last_name, id_number, date_of_birth, nationality, address_line1, address_line2, city, province, postal_code, country, account_number, balance, status, pin_hash, pin_attempts, pin_locked_until, is_phone_verified, is_email_verified, is_id_verified, is_address_verified, is_fica_compliant, id_document_url, proof_of_residence_url, selfie_url, daily_limit, monthly_limit, daily_spent, monthly_spent, last_daily_reset, last_monthly_reset, preferred_language, notification_enabled, marketing_consent, user_metadata, referral_code, referred_by, created_at, updated_at, last_active_at, verified_at) VALUES (%(id)s::UUID, %(phone_number)s, %(email)s, %(whatsapp_name)s, %(first_name)s, %(last_name)s, %(id_number)s, %(date_of_birth)s, %(nationality)s, %(address_line1)s, %(address_line2)s, %(city)s, %(province)s, %(postal_code)s, %(country)s, %(account_number)s, %(balance)s, %(status)s, %(pin_hash)s, %(pin_attempts)s, %(pin_locked_until)s, %(is_phone_verified)s, %(is_email_verified)s, %(is_id_verified)s, %(is_address_verified)s, %(is_fica_compliant)s, %(id_document_url)s, %(proof_of_residence_url)s, %(selfie_url)s, %(daily_limit)s, %(monthly_limit)s, %(daily_spent)s, %(monthly_spent)s, now(), now(), %(preferred_language)s, %(notification_enabled)s, %(marketing_consent)s, %(user_metadata)s, %(referral_code)s, %(referred_by)s::UUID, now(), now(), now(), %(verified_at)s) RETURNING users.last_daily_reset, users.last_monthly_reset, users.created_at, users.updated_at, users.last_active_at"}
{"asctime": "2025-10-30 21:15:23,228", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00045s] {'id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'email': None, 'whatsapp_name': 'Hello World!', 'first_name': None, 'last_name': None, 'id_number': None, 'date_of_birth': None, 'nationality': None, 'address_line1': None, 'address_line2': None, 'city': None, 'province': None, 'postal_code': None, 'country': 'South Africa', 'account_number': None, 'balance': 0.0, 'status': 'PENDING_VERIFICATION', 'pin_hash': None, 'pin_attempts': 0, 'pin_locked_until': None, 'is_phone_verified': False, 'is_email_verified': False, 'is_id_verified': False, 'is_address_verified': False, 'is_fica_compliant': False, 'id_document_url': None, 'proof_of_residence_url': None, 'selfie_url': None, 'daily_limit': 25000.0, 'monthly_limit': 100000.0, 'daily_spent': 0.0, 'monthly_spent': 0.0, 'preferred_language': 'en', 'notification_enabled': True, 'marketing_consent': False, 'user_metadata': '{}', 'referral_code': None, 'referred_by': None, 'verified_at': None}"}
{"asctime": "2025-10-30 21:15:23,233", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:15:24,287", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:15:24,288", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM4de6b1ce4817f91e97c362a4d1bdb85c"}
{"asctime": "2025-10-30 21:15:52,527", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMe7bca71b3472352b6f54fa8704bb65db', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMe7bca71b3472352b6f54fa8704bb65db', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '2244', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMe7bca71b3472352b6f54fa8704bb65db', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:15:52,530", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:15:52,530", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:15:52,531", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 29.31s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:15:52,541", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:15:52,541", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00082s] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 15, 52, 539815), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:15:52,549", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:15:52,551", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:15:52,552", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:15:52,553", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00029s] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:15:52,556", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:15:52,556", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00036s] {'id': UUID('c1fe810b-34b0-451d-a306-c3b3bdfee24e'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMe7bca71b3472352b6f54fa8704bb65db', 'message_type': 'text', 'direction': 'inbound', 'message_text': '2244', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:15:52,562", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:15:52,563", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:15:52,564", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:15:52,564", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.01163s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:15:52,566", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:15:52,566", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00018s] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:15:52,997", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:15:53,006", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:15:53,007", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:15:53,672", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:15:53,673", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMb93af07efc5344949e43c67a42d85a4a"}
{"asctime": "2025-10-30 21:16:07,445", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM2c0a377c7cd4679e8b3f4ca8585f7e15', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM2c0a377c7cd4679e8b3f4ca8585f7e15', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '4028', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM2c0a377c7cd4679e8b3f4ca8585f7e15', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:16:07,447", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:07,448", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:07,448", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 44.23s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:07,450", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:16:07,452", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 14.91s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 16, 7, 449843), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:07,453", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:07,455", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:07,455", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:07,456", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 14.9s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:07,461", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:16:07,462", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 14.91s ago] {'id': UUID('3cf3ed6c-3eac-4f8d-94c2-2b5df5c044fd'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM2c0a377c7cd4679e8b3f4ca8585f7e15', 'message_type': 'text', 'direction': 'inbound', 'message_text': '4028', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:16:07,463", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:07,464", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:07,464", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:07,464", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 14.91s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:07,466", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:07,466", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 14.9s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:07,467", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:16:07,478", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:16:07,478", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:16:07,962", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:16:07,963", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMa4d59cec3aa0326c8c28326a78acee9e"}
{"asctime": "2025-10-30 21:16:20,709", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM5602aa5fd095731c81d9b0d7c5f999f0', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM5602aa5fd095731c81d9b0d7c5f999f0', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'What else can you do ?', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM5602aa5fd095731c81d9b0d7c5f999f0', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:16:20,711", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:20,711", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:20,712", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 57.49s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:20,713", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:16:20,714", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 28.17s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 16, 20, 713399), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:20,715", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:20,716", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:20,717", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:20,717", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 28.16s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:20,719", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:16:20,719", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 28.16s ago] {'id': UUID('1689d47c-8d5b-47c0-84e5-8a47d6329ebc'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM5602aa5fd095731c81d9b0d7c5f999f0', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'What else can you do ?', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:16:20,720", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:20,726", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:20,727", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:20,728", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 28.17s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:21,321", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:16:21,323", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM95ca2c423a9dac2f019225676fc1bb18"}
{"asctime": "2025-10-30 21:16:21,323", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:16:38,058", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM72bc42b240b7f95248d6d418924002d0', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM72bc42b240b7f95248d6d418924002d0', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '6798', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM72bc42b240b7f95248d6d418924002d0', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:16:38,061", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:38,062", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:38,062", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 74.84s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:38,063", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:16:38,063", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 45.52s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 16, 38, 63259), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:38,065", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:38,066", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:38,067", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:38,067", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 45.51s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:38,068", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:16:38,069", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 45.51s ago] {'id': UUID('16ac2f55-7ce9-41b4-97d8-d9e5f472eef8'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM72bc42b240b7f95248d6d418924002d0', 'message_type': 'text', 'direction': 'inbound', 'message_text': '6798', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:16:38,070", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:38,075", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:38,076", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:38,077", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 45.52s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:38,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:38,079", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 45.51s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:38,080", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:16:38,090", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:16:38,091", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:16:38,642", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:16:38,644", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM9e0a44371c0e53c766f15836222476b0"}
{"asctime": "2025-10-30 21:16:48,747", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMbaa91db11020237c0240a2c7c3242a03', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMbaa91db11020237c0240a2c7c3242a03', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '9175', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMbaa91db11020237c0240a2c7c3242a03', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:16:48,749", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:48,749", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:48,749", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 85.53s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:48,751", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:16:48,751", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 56.21s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 16, 48, 750962), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:48,753", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:48,756", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:48,757", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:48,757", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 56.2s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:48,760", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:16:48,761", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 56.2s ago] {'id': UUID('8da06d83-edc9-449c-90c3-16adf4cf4c9e'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMbaa91db11020237c0240a2c7c3242a03', 'message_type': 'text', 'direction': 'inbound', 'message_text': '9175', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:16:48,764", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:16:48,766", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:16:48,766", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:16:48,766", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 56.21s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:16:48,768", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:16:48,768", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 56.2s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:16:48,769", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:16:48,780", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:16:48,781", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:16:49,358", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:16:49,359", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMaff23bbc1beb77b1345616deb9f7b38d"}
{"asctime": "2025-10-30 21:23:21,001", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMb89699b936a6658769b893e16dadd27a', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMb89699b936a6658769b893e16dadd27a', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '5678', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMb89699b936a6658769b893e16dadd27a', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:23:21,009", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:23:21,010", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:23:21,010", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 477.8s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:23:21,014", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:23:21,014", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 448.5s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 23, 21, 13354), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:23:21,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:23:21,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:23:21,018", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:23:21,019", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 448.5s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:23:21,020", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:23:21,020", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 448.5s ago] {'id': UUID('6d2a4316-197b-4e2d-abaf-0bc356fb4749'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMb89699b936a6658769b893e16dadd27a', 'message_type': 'text', 'direction': 'inbound', 'message_text': '5678', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:23:21,022", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:23:21,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:23:21,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:23:21,023", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 448.5s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:23:21,033", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:23:21,033", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 448.5s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:23:21,034", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:23:21,042", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:23:21,042", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:23:22,208", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:23:22,210", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM8d737ad83ae2c5f26e6a5ff5c4058e21"}
{"asctime": "2025-10-30 21:25:23,364", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM54c2393573f1e77254cb0ae220b0e103', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM54c2393573f1e77254cb0ae220b0e103', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '7702', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM54c2393573f1e77254cb0ae220b0e103', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:25:23,372", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:25:23,373", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:25:23,374", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 600.1s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:25:23,376", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:25:23,377", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 570.8s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 25, 23, 376414), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:25:23,378", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:25:23,380", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:25:23,380", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:25:23,380", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 570.8s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:25:23,382", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:25:23,382", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 570.8s ago] {'id': UUID('5acd44de-5269-429b-9b54-f63c5da49fa5'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM54c2393573f1e77254cb0ae220b0e103', 'message_type': 'text', 'direction': 'inbound', 'message_text': '7702', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:25:23,383", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:25:23,384", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:25:23,385", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:25:23,385", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 570.8s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:25:23,386", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:25:23,386", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 570.8s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:25:23,387", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:25:23,396", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:25:23,396", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:25:24,461", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:25:24,462", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMef329b83ac5266e4dc0391b875ae3fb0"}
{"asctime": "2025-10-30 21:25:49,308", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM121faa34ad2ac3c7061e3930010a7c97', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM121faa34ad2ac3c7061e3930010a7c97', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '0852', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM121faa34ad2ac3c7061e3930010a7c97', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:25:49,311", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:25:49,312", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:25:49,312", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 626.1s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:25:49,316", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:25:49,316", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 596.8s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 25, 49, 315169), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:25:49,318", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:25:49,326", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:25:49,326", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:25:49,327", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 596.8s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:25:49,329", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:25:49,329", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 596.8s ago] {'id': UUID('88da3700-f77c-4131-990b-f673ac4f1cd1'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM121faa34ad2ac3c7061e3930010a7c97', 'message_type': 'text', 'direction': 'inbound', 'message_text': '0852', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:25:49,330", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:25:49,331", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:25:49,331", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:25:49,331", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 596.8s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:25:49,332", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:25:49,333", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 596.8s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:25:49,334", "name": "passlib.handlers.bcrypt", "levelname": "WARNING", "message": "(trapped) error reading bcrypt version", "exc_info": "Traceback (most recent call last):\n  File \"/Users/explosive/projects/cyrax/venv/lib/python3.11/site-packages/passlib/handlers/bcrypt.py\", line 620, in _load_backend_mixin\n    version = _bcrypt.__about__.__version__\n              ^^^^^^^^^^^^^^^^^\nAttributeError: module 'bcrypt' has no attribute '__about__'"}
{"asctime": "2025-10-30 21:25:49,344", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:25:49,345", "name": "app.services.security_service", "levelname": "ERROR", "message": "Set PIN error: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])"}
{"asctime": "2025-10-30 21:25:50,416", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:25:50,417", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM3297222e0abae6e9c341afcbd1b49839"}
{"asctime": "2025-10-30 21:30:24,633", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 21:30:25,186", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 21:30:25,186", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 21:30:25,205", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 21:30:25,205", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:30:25,206", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 21:30:25,206", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:30:25,206", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 21:30:25,206", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:30:25,206", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:30:25,207", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:30:25,207", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00009s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:30:25,209", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:30:25,209", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001935s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:30:25,210", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:30:25,210", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002468s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:30:25,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:30:25,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00007s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:30:25,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:30:25,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.000492s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:30:25,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:30:25,211", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0009216s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:30:25,212", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:30:25,212", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 21:30:25,212", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 21:30:25,212", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 21:30:38,310", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM8e87e5983cda6db2762bc2cb76afd420', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM8e87e5983cda6db2762bc2cb76afd420', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '4028', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM8e87e5983cda6db2762bc2cb76afd420', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:30:38,319", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:30:38,322", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:30:38,323", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00035s] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:30:38,326", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:30:38,327", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00024s] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 30, 38, 325836), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:30:38,328", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:30:38,329", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:30:38,330", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:30:38,331", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00017s] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:30:38,333", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:30:38,333", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00024s] {'id': UUID('3437df41-7226-492e-9c7a-23a12a8f45e5'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM8e87e5983cda6db2762bc2cb76afd420', 'message_type': 'text', 'direction': 'inbound', 'message_text': '4028', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:30:38,335", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:30:38,335", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:30:38,336", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:30:38,336", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.005393s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:30:38,337", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:30:38,338", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00015s] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:30:38,339", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:30:38,340", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00015s] {'phone_number_1': '+27763514028', 'param_1': 5}"}
{"asctime": "2025-10-30 21:30:43,083", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 21:30:43,090", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:30:43,091", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 4.751s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:30:43,095", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE conversations SET ai_response=%(ai_response)s, intent_detected=%(intent_detected)s, confidence_score=%(confidence_score)s, is_processed=%(is_processed)s WHERE conversations.id = %(conversations_id)s::UUID"}
{"asctime": "2025-10-30 21:30:43,095", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00050s] {'ai_response': \"It looks like you're entering a PIN. Just to let you know, I can't process transactions if your FICA status is pending. Is there anything else you'd like to do, like checking your balance or buying airtime?\", 'intent_detected': 'conversation', 'confidence_score': 0.8, 'is_processed': True, 'conversations_id': UUID('3437df41-7226-492e-9c7a-23a12a8f45e5')}"}
{"asctime": "2025-10-30 21:30:43,097", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:30:43,885", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:30:43,888", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMe657ba598c6fe7d49bdf499027a063bc"}
{"asctime": "2025-10-30 21:31:15,677", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM4d6be8fc8a0317b1b1edb199d7a941c8', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM4d6be8fc8a0317b1b1edb199d7a941c8', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'What\u2019s my balance', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM4d6be8fc8a0317b1b1edb199d7a941c8', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:31:15,679", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:15,680", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:15,680", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.36s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:15,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:31:15,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.35s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 31, 15, 681777), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:15,684", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:15,687", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:15,695", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:31:15,695", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.36s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:15,697", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:31:15,698", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.36s ago] {'id': UUID('859ae153-5889-4545-a796-5d82cdd60435'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM4d6be8fc8a0317b1b1edb199d7a941c8', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'What\u2019s my balance', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:31:15,698", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:15,699", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:15,699", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:31:15,699", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.37s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:15,702", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:15,702", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.36s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:15,702", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:15,703", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 37.36s ago] {'phone_number_1': '+27763514028', 'param_1': 5}"}
{"asctime": "2025-10-30 21:31:19,941", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 21:31:19,946", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:19,947", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 41.61s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:19,949", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE conversations SET ai_response=%(ai_response)s, intent_detected=%(intent_detected)s, confidence_score=%(confidence_score)s, is_processed=%(is_processed)s WHERE conversations.id = %(conversations_id)s::UUID"}
{"asctime": "2025-10-30 21:31:19,949", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 36.85s ago] {'ai_response': 'Your current balance is R0.00. If you need help with anything else, just let me know!', 'intent_detected': 'check_balance', 'confidence_score': 0.9, 'is_processed': True, 'conversations_id': UUID('859ae153-5889-4545-a796-5d82cdd60435')}"}
{"asctime": "2025-10-30 21:31:19,950", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:19,952", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:19,953", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:31:19,954", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 41.62s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:19,958", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:19,958", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 41.62s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:20,538", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:31:20,539", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM58db09d632f27e51f0de430f13bd9bdb"}
{"asctime": "2025-10-30 21:31:20,540", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:31:45,228", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM9611d67294d010623147f373372b705f', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM9611d67294d010623147f373372b705f', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Okay send r10 to thabo', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM9611d67294d010623147f373372b705f', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:31:45,231", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:45,231", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:45,232", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.91s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:45,233", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:31:45,234", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.91s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 31, 45, 233455), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:45,234", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:45,236", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:45,236", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:31:45,236", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.9s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:45,238", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:31:45,238", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.9s ago] {'id': UUID('60df7c34-c21c-4f66-9a52-233e68729772'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM9611d67294d010623147f373372b705f', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Okay send r10 to thabo', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:31:45,239", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:45,241", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:45,241", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:31:45,241", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.91s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:45,242", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:45,243", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.9s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:45,244", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:45,244", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 66.9s ago] {'phone_number_1': '+27763514028', 'param_1': 5}"}
{"asctime": "2025-10-30 21:31:49,509", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 21:31:49,526", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:31:49,527", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 71.19s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:31:49,530", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE conversations SET ai_response=%(ai_response)s, intent_detected=%(intent_detected)s, entities_extracted=%(entities_extracted)s, confidence_score=%(confidence_score)s, is_processed=%(is_processed)s WHERE conversations.id = %(conversations_id)s::UUID"}
{"asctime": "2025-10-30 21:31:49,530", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00034s] {'ai_response': \"Just to confirm, you want to send R10 to Thabo. Could you please provide Thabo's phone number or account number? Also, remember that your balance is currently R0.00, so you'll need to top up first. Let me know how you'd like to proceed!\", 'intent_detected': 'send_money', 'entities_extracted': '{\"amount\": 10.0, \"recipient_name\": \"thabo\"}', 'confidence_score': 0.9, 'is_processed': True, 'conversations_id': UUID('60df7c34-c21c-4f66-9a52-233e68729772')}"}
{"asctime": "2025-10-30 21:31:49,531", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:49,532", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:31:49,533", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:31:49,533", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 71.2s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:50,032", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:31:50,033", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM8a5d483b959f19b1ec26707bdac2a411"}
{"asctime": "2025-10-30 21:31:50,035", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET is_fica_compliant=%(is_fica_compliant)s, updated_at=now() WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:31:50,035", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00041s] {'is_fica_compliant': True, 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:31:50,036", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:31:50,480", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:31:50,481", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM32e3ce77839372eaaac1b589bdefdb06"}
{"asctime": "2025-10-30 21:32:14,815", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM2c0e1f547abaa9322c7ec88b1709cf03', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM2c0e1f547abaa9322c7ec88b1709cf03', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Yes', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM2c0e1f547abaa9322c7ec88b1709cf03', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:32:14,817", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:14,818", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:14,818", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 96.49s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:14,820", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:32:14,821", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 96.49s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 32, 14, 820290), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:14,822", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:14,823", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:14,824", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:14,824", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 96.49s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:14,825", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:32:14,826", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 96.49s ago] {'id': UUID('e79dbea3-6aad-4200-8c5c-bab8f871a390'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM2c0e1f547abaa9322c7ec88b1709cf03', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Yes', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:32:14,827", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:15,368", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:32:15,369", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM0dad0405dc057370dc3ae1b5e059cb5e"}
{"asctime": "2025-10-30 21:32:28,276", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMf99c2b56c52850246bea2241b2639fc1', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMf99c2b56c52850246bea2241b2639fc1', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '4029', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMf99c2b56c52850246bea2241b2639fc1', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:32:28,277", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:28,277", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:28,278", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 110s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:28,279", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:32:28,279", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 110s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 32, 28, 279206), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:28,280", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:28,281", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:28,282", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:28,282", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 109.9s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:28,283", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:32:28,284", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 109.9s ago] {'id': UUID('87181b57-6c80-409c-8d52-12bfe039ae93'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMf99c2b56c52850246bea2241b2639fc1', 'message_type': 'text', 'direction': 'inbound', 'message_text': '4029', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:32:28,285", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:28,285", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:28,286", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:28,286", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 110s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:28,287", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:28,287", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 109.9s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:28,778", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:32:28,780", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM5b21386e457b8a007d725fcb626b8d94"}
{"asctime": "2025-10-30 21:32:28,781", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:32:40,589", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM6082c3597f4b8a49586dc4419836652e', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM6082c3597f4b8a49586dc4419836652e', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '4028', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM6082c3597f4b8a49586dc4419836652e', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:32:40,590", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:40,591", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:40,591", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 122.3s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:40,592", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:32:40,592", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 122.3s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 32, 40, 592441), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:40,593", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:40,595", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:40,595", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:40,595", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 122.3s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:40,596", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:32:40,597", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 122.3s ago] {'id': UUID('3318ce49-cd24-4ca9-9eeb-e6e2b61180ab'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM6082c3597f4b8a49586dc4419836652e', 'message_type': 'text', 'direction': 'inbound', 'message_text': '4028', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:32:40,597", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:40,598", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:40,598", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:40,598", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 122.3s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:40,599", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:40,600", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 122.3s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:41,151", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:32:41,153", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMe772ca6a8254cebdc18559946070860a"}
{"asctime": "2025-10-30 21:32:41,154", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:32:52,299", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM8fda00212f62ea29b00d37c990052935', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM8fda00212f62ea29b00d37c990052935', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'I\u2019ve created a pin', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM8fda00212f62ea29b00d37c990052935', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:32:52,300", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:52,301", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:52,301", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 134s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:52,302", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:32:52,303", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 134s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 32, 52, 302642), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:52,303", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:52,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:52,305", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:52,306", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 134s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:52,307", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:32:52,307", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 134s ago] {'id': UUID('cf3b2b2e-8d7f-4a27-b87e-96f5d57fdff0'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM8fda00212f62ea29b00d37c990052935', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'I\u2019ve d a pin', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:32:52,308", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:32:52,309", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:32:52,309", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:32:52,309", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 134s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:32:52,310", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:32:52,310", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 134s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:32:53,290", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:32:53,291", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM38ea51825f4170d682bdca83de93e9f2"}
{"asctime": "2025-10-30 21:32:53,292", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:33:00,367", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMbbecb1d1abfac612989d9b88964d303c', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMbbecb1d1abfac612989d9b88964d303c', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Set pin', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMbbecb1d1abfac612989d9b88964d303c', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:33:00,369", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:33:00,370", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:33:00,370", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 142s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:33:00,371", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:33:00,372", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 142s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 33, 0, 371612), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:33:00,373", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:33:00,374", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:33:00,375", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:33:00,375", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 142s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:33:00,377", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:33:00,377", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 142s ago] {'id': UUID('cdaff683-cece-48db-9f76-935bcf2b2bf5'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMbbecb1d1abfac612989d9b88964d303c', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Set pin', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:33:00,378", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:33:00,379", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:33:00,379", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:33:00,380", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 142s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:33:00,381", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:33:00,382", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 142s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:33:01,335", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:33:01,336", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM955a7ce10a2dd87e8d37cad180d986ef"}
{"asctime": "2025-10-30 21:33:01,337", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:40:57,367", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 21:40:57,935", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 21:40:57,935", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 21:40:57,953", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 21:40:57,953", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:40:57,954", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 21:40:57,954", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:40:57,954", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 21:40:57,954", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:40:57,955", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:40:57,956", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:40:57,956", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00009s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:40:57,958", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:40:57,958", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002185s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:40:57,958", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:40:57,958", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002668s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:40:57,959", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:40:57,959", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00007s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:40:57,960", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:40:57,960", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0006341s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:40:57,960", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:40:57,961", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001365s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:40:57,961", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:40:57,961", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 21:40:57,961", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 21:40:57,961", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 21:45:24,441", "name": "app.main", "levelname": "INFO", "message": "Shutting down Cyrax..."}
{"asctime": "2025-10-30 21:45:24,989", "name": "app.main", "levelname": "INFO", "message": "Starting Cyrax v1.0.0"}
{"asctime": "2025-10-30 21:45:24,989", "name": "app.main", "levelname": "INFO", "message": "Environment: development"}
{"asctime": "2025-10-30 21:45:25,008", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select pg_catalog.version()"}
{"asctime": "2025-10-30 21:45:25,008", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:45:25,009", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "select current_schema()"}
{"asctime": "2025-10-30 21:45:25,009", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:45:25,009", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "show standard_conforming_strings"}
{"asctime": "2025-10-30 21:45:25,009", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[raw sql] {}"}
{"asctime": "2025-10-30 21:45:25,009", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:25,011", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:45:25,011", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00010s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:45:25,013", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:45:25,013", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002621s ago] {'table_name': 'conversations', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:45:25,014", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_class.relname \nFROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace \nWHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:45:25,014", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.003188s ago] {'table_name': 'transactions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:45:25,015", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:45:25,015", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00007s] {'typname_1': 'userstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:45:25,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:45:25,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.0008052s ago] {'typname_1': 'transactiontype', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:45:25,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT pg_catalog.pg_type.typname \nFROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace \nWHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s"}
{"asctime": "2025-10-30 21:45:25,016", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.001223s ago] {'typname_1': 'transactionstatus', 'nspname_1': 'pg_catalog'}"}
{"asctime": "2025-10-30 21:45:25,017", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:25,017", "name": "app.database", "levelname": "INFO", "message": "Database tables created successfully"}
{"asctime": "2025-10-30 21:45:25,017", "name": "app.main", "levelname": "INFO", "message": "Database initialized successfully"}
{"asctime": "2025-10-30 21:45:25,017", "name": "app.main", "levelname": "INFO", "message": "Cyrax startup complete!"}
{"asctime": "2025-10-30 21:45:33,303", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM2b3d98121ad7b6917ffd7ea5d4ea1eae', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM2b3d98121ad7b6917ffd7ea5d4ea1eae', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Hi', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM2b3d98121ad7b6917ffd7ea5d4ea1eae', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:45:33,308", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:33,311", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:33,312", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00031s] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:45:33,314", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:45:33,314", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00008s] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 45, 33, 313480), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:33,315", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:33,316", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:33,317", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:45:33,317", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00011s] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:33,318", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:45:33,318", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00013s] {'id': UUID('819dc56d-0e8e-47ec-a83c-b7c79eb08200'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM2b3d98121ad7b6917ffd7ea5d4ea1eae', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Hi', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:45:33,319", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:33,319", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:33,320", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:45:33,320", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 0.002935s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:33,321", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:33,321", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00013s] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:45:33,323", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:33,323", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00027s] {'phone_number_1': '+27763514028', 'param_1': 5}"}
{"asctime": "2025-10-30 21:45:34,427", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 21:45:34,432", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:34,433", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 1.11s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:45:34,437", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE conversations SET ai_response=%(ai_response)s, intent_detected=%(intent_detected)s, confidence_score=%(confidence_score)s, is_processed=%(is_processed)s WHERE conversations.id = %(conversations_id)s::UUID"}
{"asctime": "2025-10-30 21:45:34,437", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00054s] {'ai_response': 'Hey there! How can I assist you today? \ud83d\ude0a', 'intent_detected': 'conversation', 'confidence_score': 0.8, 'is_processed': True, 'conversations_id': UUID('819dc56d-0e8e-47ec-a83c-b7c79eb08200')}"}
{"asctime": "2025-10-30 21:45:34,439", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:35,584", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:45:35,585", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM8a5ed22479e722bac1f67cc6bc27d3fc"}
{"asctime": "2025-10-30 21:45:47,201", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMe70aafa3d6d93cb81b00f4940e9977c5', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMe70aafa3d6d93cb81b00f4940e9977c5', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Send money to Samuel', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMe70aafa3d6d93cb81b00f4940e9977c5', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:45:47,202", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:47,203", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:47,203", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.89s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:45:47,205", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:45:47,205", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.89s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 45, 47, 205205), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:47,207", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:47,219", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:47,220", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:45:47,220", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.9s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:47,222", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:45:47,222", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.9s ago] {'id': UUID('79cae9e6-12a9-44d0-b0fd-83c65686e330'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMe70aafa3d6d93cb81b00f4940e9977c5', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Send money to Samuel', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:45:47,224", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:47,225", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:47,225", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:45:47,225", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.91s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:47,228", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:47,228", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.91s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:45:47,229", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:47,230", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 13.91s ago] {'phone_number_1': '+27763514028', 'param_1': 5}"}
{"asctime": "2025-10-30 21:45:48,437", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 21:45:48,446", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:45:48,446", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 15.12s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:45:48,448", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE conversations SET ai_response=%(ai_response)s, intent_detected=%(intent_detected)s, entities_extracted=%(entities_extracted)s, confidence_score=%(confidence_score)s, is_processed=%(is_processed)s WHERE conversations.id = %(conversations_id)s::UUID"}
{"asctime": "2025-10-30 21:45:48,448", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[generated in 0.00024s] {'ai_response': 'Sure! How much would you like to send to Samuel? Also, do you have his phone number or bank account details?', 'intent_detected': 'send_money', 'entities_extracted': '{\"amount\": 0, \"recipient_name\": \"samuel\"}', 'confidence_score': 0.9, 'is_processed': True, 'conversations_id': UUID('79cae9e6-12a9-44d0-b0fd-83c65686e330')}"}
{"asctime": "2025-10-30 21:45:48,449", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:45:48,450", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:45:48,450", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:45:48,450", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 15.13s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:45:48,880", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:45:48,883", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM0c785f46ecb27d0ca2bef61865da2977"}
{"asctime": "2025-10-30 21:45:48,884", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:46:00,022", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMeedd1f42cdf6d8825c9bd011bbaf8c3b', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMeedd1f42cdf6d8825c9bd011bbaf8c3b', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'No', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMeedd1f42cdf6d8825c9bd011bbaf8c3b', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:46:00,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:00,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:00,025", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 26.71s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:00,027", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:46:00,028", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 26.71s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 46, 0, 27072), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:00,029", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:00,031", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:00,032", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:00,033", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 26.72s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:00,041", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:46:00,041", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 26.72s ago] {'id': UUID('6afdfd3e-d405-4f1b-b670-39dcc89415dc'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMeedd1f42cdf6d8825c9bd011bbaf8c3b', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'No', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:46:00,043", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:00,635", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:46:00,637", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM23a15e00f30d087993fbc3801411e6a3"}
{"asctime": "2025-10-30 21:46:21,081", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMede9daf55e3c8327f021b1725b6bf6d0', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMede9daf55e3c8327f021b1725b6bf6d0', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Send 50 rand to thabo', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMede9daf55e3c8327f021b1725b6bf6d0', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:46:21,084", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:21,085", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:21,087", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.77s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:21,089", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:46:21,089", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.77s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 46, 21, 88456), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:21,090", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:21,091", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:21,091", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:21,091", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.77s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:21,093", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:46:21,093", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.77s ago] {'id': UUID('c6b3bf9d-500e-4c26-8d23-4409483ee22b'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMede9daf55e3c8327f021b1725b6bf6d0', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Send 50 rand to thabo', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:46:21,094", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:21,095", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:21,095", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:21,096", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.78s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:21,101", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:21,102", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.78s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:21,103", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:21,104", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 47.78s ago] {'phone_number_1': '+27763514028', 'param_1': 5}"}
{"asctime": "2025-10-30 21:46:22,247", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.openai.com/v1/chat/completions \"HTTP/1.1 200 OK\""}
{"asctime": "2025-10-30 21:46:22,252", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT conversations.id AS conversations_id, conversations.user_id AS conversations_user_id, conversations.phone_number AS conversations_phone_number, conversations.message_id AS conversations_message_id, conversations.message_type AS conversations_message_type, conversations.direction AS conversations_direction, conversations.message_text AS conversations_message_text, conversations.media_url AS conversations_media_url, conversations.media_mime_type AS conversations_media_mime_type, conversations.ai_response AS conversations_ai_response, conversations.intent_detected AS conversations_intent_detected, conversations.entities_extracted AS conversations_entities_extracted, conversations.confidence_score AS conversations_confidence_score, conversations.processing_time_ms AS conversations_processing_time_ms, conversations.conversation_context AS conversations_conversation_context, conversations.session_id AS conversations_session_id, conversations.is_processed AS conversations_is_processed, conversations.is_error AS conversations_is_error, conversations.error_message AS conversations_error_message, conversations.conversation_metadata AS conversations_conversation_metadata, conversations.created_at AS conversations_created_at, conversations.processed_at AS conversations_processed_at \nFROM conversations \nWHERE conversations.phone_number = %(phone_number_1)s ORDER BY conversations.created_at DESC \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:22,252", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 48.93s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:22,254", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE conversations SET ai_response=%(ai_response)s, intent_detected=%(intent_detected)s, entities_extracted=%(entities_extracted)s, confidence_score=%(confidence_score)s, is_processed=%(is_processed)s WHERE conversations.id = %(conversations_id)s::UUID"}
{"asctime": "2025-10-30 21:46:22,254", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 33.81s ago] {'ai_response': \"I can help you with that! Could you please provide Thabo's phone number or bank account details?\", 'intent_detected': 'send_money', 'entities_extracted': '{\"amount\": 50.0, \"recipient_name\": \"thabo\"}', 'confidence_score': 0.9, 'is_processed': True, 'conversations_id': UUID('c6b3bf9d-500e-4c26-8d23-4409483ee22b')}"}
{"asctime": "2025-10-30 21:46:22,255", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:22,257", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:22,257", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:22,257", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 48.94s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:22,963", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:46:22,966", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM114687ff6df5f29f67119ad49d51ccd6"}
{"asctime": "2025-10-30 21:46:22,967", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:46:34,436", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM1706bb85fa58439a63d7c02f68d17862', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM1706bb85fa58439a63d7c02f68d17862', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Yes', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM1706bb85fa58439a63d7c02f68d17862', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:46:34,439", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:34,439", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:34,440", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 61.13s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:34,441", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:46:34,441", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 61.13s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 46, 34, 441213), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:34,442", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:34,444", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:34,444", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:34,444", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 61.13s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:34,446", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:46:34,446", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 61.13s ago] {'id': UUID('6f743b34-64a9-4cc2-afad-e51cf8d9994d'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM1706bb85fa58439a63d7c02f68d17862', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Yes', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:46:34,447", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:35,051", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:46:35,053", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SMa2f63f987d6cd168ac4eca6994799538"}
{"asctime": "2025-10-30 21:46:40,673", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SM7bdb00aa28fda922bb304091d16a2b00', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SM7bdb00aa28fda922bb304091d16a2b00', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': '4028', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SM7bdb00aa28fda922bb304091d16a2b00', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:46:40,675", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:40,675", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:40,676", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 67.36s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:40,677", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:46:40,677", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 67.36s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 46, 40, 677199), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:40,679", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:40,681", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:40,682", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:40,683", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 67.36s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:40,684", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:46:40,685", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 67.37s ago] {'id': UUID('aa3e54b1-db69-4d10-9871-a013130d7a18'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SM7bdb00aa28fda922bb304091d16a2b00', 'message_type': 'text', 'direction': 'inbound', 'message_text': '4028', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:46:40,693", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:40,695", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:40,695", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:40,695", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 67.38s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:40,697", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:40,697", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 67.38s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:41,159", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:46:41,161", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM0ef1f4068c754d97a0b0ab84fd32a22e"}
{"asctime": "2025-10-30 21:46:41,162", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:46:48,323", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMbbaca57f738febbba434e67a5eedb8a9', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMbbaca57f738febbba434e67a5eedb8a9', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Set pin', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMbbaca57f738febbba434e67a5eedb8a9', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:46:48,324", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:48,325", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:48,325", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 75.01s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:48,327", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:46:48,330", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 75.02s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 46, 48, 327163), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:48,333", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:48,335", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:48,336", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:48,337", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 75.02s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:48,346", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:46:48,346", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 75.03s ago] {'id': UUID('53f597b7-e8cc-4a91-a7bf-49f8e234dcc1'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMbbaca57f738febbba434e67a5eedb8a9', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Set pin', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:46:48,348", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:48,349", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:48,349", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:48,349", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 75.03s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:48,351", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:48,351", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 75.03s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:48,863", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:46:48,865", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM9ae74e43fd30c1f5b21ca986ce617428"}
{"asctime": "2025-10-30 21:46:48,866", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:46:56,639", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMae0fa596f8a0e6df851f74b3d22e3eeb', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMae0fa596f8a0e6df851f74b3d22e3eeb', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'SET PIN', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMae0fa596f8a0e6df851f74b3d22e3eeb', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:46:56,641", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:56,642", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:56,642", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 83.33s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:56,643", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:46:56,644", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 83.33s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 46, 56, 643581), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:56,645", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:56,646", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:56,647", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:56,647", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 83.33s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:56,649", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:46:56,649", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 83.33s ago] {'id': UUID('3b608c98-8326-4d0a-b2b9-de37b753a799'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMae0fa596f8a0e6df851f74b3d22e3eeb', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'SET PIN', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:46:56,650", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:46:56,651", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:46:56,651", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:46:56,652", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 83.33s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:46:56,653", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:46:56,654", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 83.33s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:46:57,127", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:46:57,128", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM077b4d7ac5cb8b178cb59e6db5a2b478"}
{"asctime": "2025-10-30 21:46:57,129", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:53:37,399", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMcc5e9a69a20890b215e76e72bd3b746c', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMcc5e9a69a20890b215e76e72bd3b746c', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Ok', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMcc5e9a69a20890b215e76e72bd3b746c', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:53:37,406", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:53:37,407", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:53:37,407", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 484.1s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:53:37,410", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:53:37,410", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 484.1s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 53, 37, 410087), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:53:37,411", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:53:37,413", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:53:37,414", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:53:37,414", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 484.1s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:53:37,415", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:53:37,415", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 484.1s ago] {'id': UUID('c696c92c-efb0-4fa8-a2cf-04d1892e0cf7'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMcc5e9a69a20890b215e76e72bd3b746c', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Ok', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:53:37,416", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:53:37,417", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:53:37,417", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:53:37,417", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 484.1s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:53:37,418", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:53:37,419", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 484.1s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:53:38,022", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:53:38,023", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM1c0d9e7965f1b014218b8f0d1689822e"}
{"asctime": "2025-10-30 21:53:38,024", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
{"asctime": "2025-10-30 21:53:42,366", "name": "app.routers.whatsapp", "levelname": "INFO", "message": "Webhook received: {'SmsMessageSid': 'SMbfe2ef9fc489e15a13f373917e6226f2', 'NumMedia': '0', 'ProfileName': 'Hello World!', 'MessageType': 'text', 'SmsSid': 'SMbfe2ef9fc489e15a13f373917e6226f2', 'WaId': '27763514028', 'SmsStatus': 'received', 'Body': 'Hi', 'To': 'whatsapp:+14155238886', 'NumSegments': '1', 'ReferralNumMedia': '0', 'MessageSid': 'SMbfe2ef9fc489e15a13f373917e6226f2', 'AccountSid': 'AC6a10482bfc51f0846f64980cb7f1676e', 'ChannelMetadata': '{\"type\":\"whatsapp\",\"data\":{\"context\":{\"ProfileName\":\"Hello World!\",\"WaId\":\"27763514028\"}}}', 'From': 'whatsapp:+27763514028', 'ApiVersion': '2010-04-01'}"}
{"asctime": "2025-10-30 21:53:42,368", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:53:42,368", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.phone_number = %(phone_number_1)s \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:53:42,368", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 489.1s ago] {'phone_number_1': '+27763514028', 'param_1': 1}"}
{"asctime": "2025-10-30 21:53:42,370", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "UPDATE users SET updated_at=now(), last_active_at=%(last_active_at)s WHERE users.id = %(users_id)s::UUID"}
{"asctime": "2025-10-30 21:53:42,370", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 489s ago] {'last_active_at': datetime.datetime(2025, 10, 30, 19, 53, 42, 369968), 'users_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:53:42,371", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:53:42,373", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:53:42,373", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:53:42,373", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 489s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:53:42,375", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "INSERT INTO conversations (id, user_id, phone_number, message_id, message_type, direction, message_text, media_url, media_mime_type, ai_response, intent_detected, entities_extracted, confidence_score, processing_time_ms, conversation_context, session_id, is_processed, is_error, error_message, conversation_metadata, created_at, processed_at) VALUES (%(id)s::UUID, %(user_id)s::UUID, %(phone_number)s, %(message_id)s, %(message_type)s, %(direction)s, %(message_text)s, %(media_url)s, %(media_mime_type)s, %(ai_response)s, %(intent_detected)s, %(entities_extracted)s, %(confidence_score)s, %(processing_time_ms)s, %(conversation_context)s, %(session_id)s, %(is_processed)s, %(is_error)s, %(error_message)s, %(conversation_metadata)s, now(), %(processed_at)s) RETURNING conversations.created_at"}
{"asctime": "2025-10-30 21:53:42,375", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 489s ago] {'id': UUID('dffe46f8-f8fd-481e-970d-999286accdf1'), 'user_id': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac'), 'phone_number': '+27763514028', 'message_id': 'SMbfe2ef9fc489e15a13f373917e6226f2', 'message_type': 'text', 'direction': 'inbound', 'message_text': 'Hi', 'media_url': None, 'media_mime_type': None, 'ai_response': None, 'intent_detected': None, 'entities_extracted': '{}', 'confidence_score': None, 'processing_time_ms': None, 'conversation_context': '{}', 'session_id': None, 'is_processed': False, 'is_error': False, 'error_message': None, 'conversation_metadata': '{}', 'processed_at': None}"}
{"asctime": "2025-10-30 21:53:42,376", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "COMMIT"}
{"asctime": "2025-10-30 21:53:42,376", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "BEGIN (implicit)"}
{"asctime": "2025-10-30 21:53:42,377", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(pk_1)s::UUID"}
{"asctime": "2025-10-30 21:53:42,377", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 489.1s ago] {'pk_1': UUID('d55d888e-4ff5-49b4-9d97-795cff228fac')}"}
{"asctime": "2025-10-30 21:53:42,378", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "SELECT users.id AS users_id, users.phone_number AS users_phone_number, users.email AS users_email, users.whatsapp_name AS users_whatsapp_name, users.first_name AS users_first_name, users.last_name AS users_last_name, users.id_number AS users_id_number, users.date_of_birth AS users_date_of_birth, users.nationality AS users_nationality, users.address_line1 AS users_address_line1, users.address_line2 AS users_address_line2, users.city AS users_city, users.province AS users_province, users.postal_code AS users_postal_code, users.country AS users_country, users.account_number AS users_account_number, users.balance AS users_balance, users.status AS users_status, users.pin_hash AS users_pin_hash, users.pin_attempts AS users_pin_attempts, users.pin_locked_until AS users_pin_locked_until, users.is_phone_verified AS users_is_phone_verified, users.is_email_verified AS users_is_email_verified, users.is_id_verified AS users_is_id_verified, users.is_address_verified AS users_is_address_verified, users.is_fica_compliant AS users_is_fica_compliant, users.id_document_url AS users_id_document_url, users.proof_of_residence_url AS users_proof_of_residence_url, users.selfie_url AS users_selfie_url, users.daily_limit AS users_daily_limit, users.monthly_limit AS users_monthly_limit, users.daily_spent AS users_daily_spent, users.monthly_spent AS users_monthly_spent, users.last_daily_reset AS users_last_daily_reset, users.last_monthly_reset AS users_last_monthly_reset, users.preferred_language AS users_preferred_language, users.notification_enabled AS users_notification_enabled, users.marketing_consent AS users_marketing_consent, users.user_metadata AS users_user_metadata, users.referral_code AS users_referral_code, users.referred_by AS users_referred_by, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_active_at AS users_last_active_at, users.verified_at AS users_verified_at \nFROM users \nWHERE users.id = %(id_1)s::UUID \n LIMIT %(param_1)s"}
{"asctime": "2025-10-30 21:53:42,378", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "[cached since 489.1s ago] {'id_1': 'd55d888e-4ff5-49b4-9d97-795cff228fac', 'param_1': 1}"}
{"asctime": "2025-10-30 21:53:42,871", "name": "httpx", "levelname": "INFO", "message": "HTTP Request: POST https://api.twilio.com/2010-04-01/Accounts/AC6a10482bfc51f0846f64980cb7f1676e/Messages.json \"HTTP/1.1 201 Created\""}
{"asctime": "2025-10-30 21:53:42,873", "name": "app.services.twilio_service", "levelname": "INFO", "message": "Message sent to +27763514028: SM4709fa11da1d86bb62e157fa53b7a481"}
{"asctime": "2025-10-30 21:53:42,874", "name": "sqlalchemy.engine.Engine", "levelname": "INFO", "message": "ROLLBACK"}
